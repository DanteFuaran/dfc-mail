#!/usr/bin/env bash
set -euo pipefail

REPO_URL="https://raw.githubusercontent.com/DanteFuaran/dfc-mail/main/install.sh"
INSTALL_SCRIPT="/tmp/dfc-mail-install.sh"

echo ""
echo "  ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
echo "  ‚ïë          DFC MAIL BOT ‚Äî –£–°–¢–ê–ù–û–í–©–ò–ö           ‚ïë"
echo "  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
echo ""

if ! command -v curl &>/dev/null; then
    echo "‚ö†Ô∏è  curl –Ω–µ –Ω–∞–π–¥–µ–Ω. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é..."
    if command -v apt-get &>/dev/null; then
        apt-get update -qq && apt-get install -y -qq curl > /dev/null 2>&1
    elif command -v yum &>/dev/null; then
        yum install -y curl > /dev/null 2>&1
    elif command -v apk &>/dev/null; then
        apk add --no-cache curl > /dev/null 2>&1
    else
        echo "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å curl. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–≥–æ –≤—Ä—É—á–Ω—É—é."
        exit 1
    fi
fi

echo "üì• –ó–∞–≥—Ä—É–∑–∫–∞ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞..."
if curl -fsSL "$REPO_URL" -o "$INSTALL_SCRIPT"; then
    chmod +x "$INSTALL_SCRIPT"
    bash "$INSTALL_SCRIPT" "$@"
    rm -f "$INSTALL_SCRIPT"
else
    echo "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫."
    echo "   –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞."
    exit 1
fi
